generator client {
  provider = "prisma-client-js"
  output   = "./generated/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

model users {
  id              Int               @id @default(autoincrement())
  username        String?           @unique
  password        String?
  fullname        String?
  phone_number    String?           @unique
  email           String?           @unique
  bio             String?
  dob             DateTime?
  photo_profile   String?
  created_at      DateTime          @default(now())
  update_at       DateTime          @updatedAt
  bill            bill[]
  payment_account payment_account[]
}

model order_detail {
  id              Int           @id @default(autoincrement())
  friend_order    friend_order? @relation(fields: [friend_order_id], references: [id])
  friend_order_id Int?
  menu            String
  quantity        Int
  price           Int
}

model friend_order {
  id           Int            @id @default(autoincrement())
  bill         bill?          @relation(fields: [bill_id], references: [id])
  bill_id      Int?
  name         String
  is_paid      Boolean        @default(false)
  order_detail order_detail[]
}

model bill {
  id                 Int              @id @default(autoincrement())
  user_id            Int?
  payment_account_id Int?
  description        String
  discount           Float?
  tax                Int
  service            Float?
  total_price        Int              @default(0)
  date               DateTime         @default(now())
  users              users?           @relation(fields: [user_id], references: [id])
  payment_account    payment_account? @relation(fields: [payment_account_id], references: [id])
  friend_order       friend_order[]
}

model payment_account {
  id           Int     @id @default(autoincrement())
  user_id      Int?
  name         String
  number       String
  card_holder  String
  is_activated Boolean
  users        users?  @relation(fields: [user_id], references: [id])
  bill         bill[]
}
